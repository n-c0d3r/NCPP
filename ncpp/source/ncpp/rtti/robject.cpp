
#include <ncpp/.hpp>
#include <ncpp/rtti/robject.hpp>



namespace ncpp {

	namespace rtti {

#ifdef NCPP_ENABLE_RTTI
		thread_local rcontext* current_context_p_g = 0;
		thread_local sz current_object_offset_g = 0;

		////////////////////////////////////////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////

		reflect_base::reflect_base(rcontext& context) {

			current_context_p_g = &context;

		}

		////////////////////////////////////////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////
		////////////////////////////////////////////////////////////////////////////////////

		rcontext& current_context() {

			return *current_context_p_g;
		}
		sz current_object_offset() {

			return current_object_offset_g;
		}
		void set_current_object_offset(sz new_offset) {

			current_object_offset_g = new_offset;
		}
#endif

	}

}