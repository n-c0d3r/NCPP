#include <ncpp/.hpp>



namespace ncpp {

	namespace rtti {



        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////



        thread_local utilities::lref_t<robject_i> current_constructing_robject_ref_g;
        thread_local utilities::lref_t<robject_i> last_constructor_called_robject_ref_g;

        robject_i& current_constructing_object() {

            return *current_constructing_robject_ref_g;
        }



        robject_constructor_begin_scope::robject_constructor_begin_scope() :
            prev_robject_ref(current_constructing_object())
        {

            current_constructing_robject_ref_g = last_constructor_called_robject_ref_g;

        }
        robject_constructor_begin_scope::~robject_constructor_begin_scope() {



        }

        robject_constructor_end_scope::robject_constructor_end_scope(robject_i& robject, robject_i& prev_robject) :
            prev_robject_ref(prev_robject)
        {



        }
        robject_constructor_end_scope::~robject_constructor_end_scope() {

            current_constructing_robject_ref_g = prev_robject_ref;

        }



        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
        //////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////



        robject_i::robject_i() :
            name_to_member_handle_map_()
        {

            last_constructor_called_robject_ref_g = *this;

        }
        robject_i::~robject_i() {



        }

	}

}